require_relative '../../lib/api/list_checker.rb'
require 'spec_helper'

describe GeeklistWS::API::ListChecker do

	describe "#check" do
		it "returns proper response with one group and without named groups " do
			list = ["(avandrel) 1 : 2 3"]
		    geeklist = eval('{:title=> "test characters",:games=> [{:id=> "32898",:title=> "Śląsk 1939",:imageid=> "323431",:average=> "6.5",:boardgame=> 0,:wargames=> 0,:number=> 1,:poste=> "Avandrel",:itemid=> "3428776",:body=> "\n\tNIEAKTUALNE\n\t\n\t\t"},{:id=> "12333",:title=> "Twilight Struggle",:imageid=> "361592",:average=> "8.32996",:boardgame=> 1,:wargames=> 1,:strategygames=> 1,:number=> 2,:poster=> "Avandrel",:itemid=> "3428842",:body=> "\n\tnieaktualne\n\t\n\t\t"},{:id=> "12333",:title=> "Twilight Struggle",:imageid=> "361592",:average=> "8.32996",:boardgame=> 1,:wargames=> 1,:strategygames=> 1,:number=> 3,:poster=> "Avandrel",:itemid=> "3428861",:body=> "\n\t123\n\t\n\t\t"}],:posters=> {:Avandrel=> "http=>//cf.geekdo-static.com/avatars/avatar_id60138.png"},:id=> "178867"}')
		    checker = GeeklistWS::API::ListChecker.new list, geeklist
			checker.check.to_s.should eql '{:exchanges=>[[{:poster=>"avandrel", :from=>[[{:id=>"32898", :title=>"Śląsk 1939", :imageid=>"323431", :average=>"6.5", :boardgame=>0, :wargames=>0, :number=>1, :poste=>"Avandrel", :itemid=>"3428776", :body=>"\n\tNIEAKTUALNE\n\t\n\t\t"}]], :to=>[[{:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>2, :poster=>"Avandrel", :itemid=>"3428842", :body=>"\n\tnieaktualne\n\t\n\t\t"}, {:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>3, :poster=>"Avandrel", :itemid=>"3428861", :body=>"\n\t123\n\t\n\t\t"}]]}]], :id=>"178867"}'
		end
	end

	describe "#check" do
		it "returns proper response with couple groups and without named groups " do
			list = ["(avandrel) 1 : 2 3 ; 4 5 ; 6 ; 7 ; 8"]
		    geeklist = eval('{ :title => "test characters", :games => [{ :id => "32898", :title => "Śląsk 1939", :imageid => "323431", :average => "6.5", :boardgame => 0, :wargames => 0, :number => 1, :poster => "Avandrel", :itemid => "3428776", :body => "\n\tNIEAKTUALNE\n\t\n\t\t"},{ :id => "12333", :title => "Twilight Struggle", :imageid => "361592", :average => "8.32996", :boardgame => 1, :wargames => 1, :strategygames => 1, :number => 2, :poster => "Avandrel", :itemid => "3428842", :body => "\n\tnieaktualne\n\t\n\t\t"},{ :id => "12333", :title => "Twilight Struggle", :imageid => "361592", :average => "8.32996", :boardgame => 1, :wargames => 1, :strategygames => 1, :number => 3, :poster => "Avandrel", :itemid => "3428861", :body => "\n\t123\n\t\n\t\t"},{ :id => "24417", :title => "Factory Fun", :imageid => "802170", :itemid => "3444094", :body => "\n\t\n\t\n\t\t", :average => "6.94877", :boardgame => 471, :strategygames => 288, :number => 4, :poster => "Avandrel"},{ :id => "12", :title => "Ra", :imageid => "1603278", :itemid => "3444096", :average => "7.50768", :boardgame => 79, :strategygames => 58, :number => 5, :poster => "Avandrel", :body => "\n\t\n\t\n\t\t"},{ :id => "34871", :title => "Ventura", :imageid => "974442", :average => "6.64303", :boardgame => 2699, :strategygames => 932, :number => 6, :poster => "Avandrel", :itemid => "3444097", :body => "\n\t\n\t\n\t\t"},{ :id => "2651", :title => "Power Grid", :imageid => "173153", :itemid => "3444098", :body => "\n\t\n\t\n\t\t", :average => "8.01534", :boardgame => 10, :strategygames => 8, :number => 7, :poster => "Avandrel"},{ :id => "7632", :title => "The Near East", :imageid => "188893", :itemid => "3444099", :body => "\n\t\n\t\n\t\t", :average => "6.70333", :boardgame => 0, :wargames => 0, :number => 8, :poster => "Avandrel"}], :posters => { :Avandrel => "http://cf.geekdo-static.com/avatars/avatar_id60138.png"}, :id => "178867"}')
		    checker = GeeklistWS::API::ListChecker.new list, geeklist
			checker.check.to_s.should eql '{:exchanges=>[[{:poster=>"avandrel", :from=>[[{:id=>"32898", :title=>"Śląsk 1939", :imageid=>"323431", :average=>"6.5", :boardgame=>0, :wargames=>0, :number=>1, :poster=>"Avandrel", :itemid=>"3428776", :body=>"\n\tNIEAKTUALNE\n\t\n\t\t"}]], :to=>[[{:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>2, :poster=>"Avandrel", :itemid=>"3428842", :body=>"\n\tnieaktualne\n\t\n\t\t"}, {:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>3, :poster=>"Avandrel", :itemid=>"3428861", :body=>"\n\t123\n\t\n\t\t"}], [{:id=>"24417", :title=>"Factory Fun", :imageid=>"802170", :itemid=>"3444094", :body=>"\n\t\n\t\n\t\t", :average=>"6.94877", :boardgame=>471, :strategygames=>288, :number=>4, :poster=>"Avandrel"}, {:id=>"12", :title=>"Ra", :imageid=>"1603278", :itemid=>"3444096", :average=>"7.50768", :boardgame=>79, :strategygames=>58, :number=>5, :poster=>"Avandrel", :body=>"\n\t\n\t\n\t\t"}], [{:id=>"34871", :title=>"Ventura", :imageid=>"974442", :average=>"6.64303", :boardgame=>2699, :strategygames=>932, :number=>6, :poster=>"Avandrel", :itemid=>"3444097", :body=>"\n\t\n\t\n\t\t"}], [{:id=>"2651", :title=>"Power Grid", :imageid=>"173153", :itemid=>"3444098", :body=>"\n\t\n\t\n\t\t", :average=>"8.01534", :boardgame=>10, :strategygames=>8, :number=>7, :poster=>"Avandrel"}], [{:id=>"7632", :title=>"The Near East", :imageid=>"188893", :itemid=>"3444099", :body=>"\n\t\n\t\n\t\t", :average=>"6.70333", :boardgame=>0, :wargames=>0, :number=>8, :poster=>"Avandrel"}]]}]], :id=>"178867"}'
		end
	end


	describe "#check" do
		it "returns proper response with named groups" do
			list = ["(avandrel) 1 : %TWIL", "(avandrel) %TWIL : %RON", "(avandrel) 1 %TWIL : %AMN", "%TWIL : 2 3", "%RON : 3 4 6 8", "%TOP : %TWIL 4 6", "%AMN : %TOP %RON"]
		    geeklist = eval('{ :title => "test characters", :games => [{ :id => "32898", :title => "Śląsk 1939", :imageid => "323431", :average => "6.5", :boardgame => 0, :wargames => 0, :number => 1, :poster => "Avandrel", :itemid => "3428776", :body => "\n\tNIEAKTUALNE\n\t\n\t\t"},{ :id => "12333", :title => "Twilight Struggle", :imageid => "361592", :average => "8.32996", :boardgame => 1, :wargames => 1, :strategygames => 1, :number => 2, :poster => "Avandrel", :itemid => "3428842", :body => "\n\tnieaktualne\n\t\n\t\t"},{ :id => "12333", :title => "Twilight Struggle", :imageid => "361592", :average => "8.32996", :boardgame => 1, :wargames => 1, :strategygames => 1, :number => 3, :poster => "Avandrel", :itemid => "3428861", :body => "\n\t123\n\t\n\t\t"},{ :id => "24417", :title => "Factory Fun", :imageid => "802170", :itemid => "3444094", :body => "\n\t\n\t\n\t\t", :average => "6.94877", :boardgame => 471, :strategygames => 288, :number => 4, :poster => "Avandrel"},{ :id => "12", :title => "Ra", :imageid => "1603278", :itemid => "3444096", :average => "7.50768", :boardgame => 79, :strategygames => 58, :number => 5, :poster => "Avandrel", :body => "\n\t\n\t\n\t\t"},{ :id => "34871", :title => "Ventura", :imageid => "974442", :average => "6.64303", :boardgame => 2699, :strategygames => 932, :number => 6, :poster => "Avandrel", :itemid => "3444097", :body => "\n\t\n\t\n\t\t"},{ :id => "2651", :title => "Power Grid", :imageid => "173153", :itemid => "3444098", :body => "\n\t\n\t\n\t\t", :average => "8.01534", :boardgame => 10, :strategygames => 8, :number => 7, :poster => "Avandrel"},{ :id => "7632", :title => "The Near East", :imageid => "188893", :itemid => "3444099", :body => "\n\t\n\t\n\t\t", :average => "6.70333", :boardgame => 0, :wargames => 0, :number => 8, :poster => "Avandrel"}], :posters => { :Avandrel => "http://cf.geekdo-static.com/avatars/avatar_id60138.png"}, :id => "178867"}')
		    checker = GeeklistWS::API::ListChecker.new list, geeklist
			checker.check.to_s.should eql '{:exchanges=>[[{:poster=>"avandrel", :from=>[[{:id=>"32898", :title=>"Śląsk 1939", :imageid=>"323431", :average=>"6.5", :boardgame=>0, :wargames=>0, :number=>1, :poster=>"Avandrel", :itemid=>"3428776", :body=>"\n\tNIEAKTUALNE\n\t\n\t\t"}]], :to=>[[{:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>2, :poster=>"Avandrel", :itemid=>"3428842", :body=>"\n\tnieaktualne\n\t\n\t\t"}, {:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>3, :poster=>"Avandrel", :itemid=>"3428861", :body=>"\n\t123\n\t\n\t\t"}]]}, {:poster=>"avandrel", :from=>[[{:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>2, :poster=>"Avandrel", :itemid=>"3428842", :body=>"\n\tnieaktualne\n\t\n\t\t"}, {:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>3, :poster=>"Avandrel", :itemid=>"3428861", :body=>"\n\t123\n\t\n\t\t"}]], :to=>[[{:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>3, :poster=>"Avandrel", :itemid=>"3428861", :body=>"\n\t123\n\t\n\t\t"}, {:id=>"24417", :title=>"Factory Fun", :imageid=>"802170", :itemid=>"3444094", :body=>"\n\t\n\t\n\t\t", :average=>"6.94877", :boardgame=>471, :strategygames=>288, :number=>4, :poster=>"Avandrel"}, {:id=>"34871", :title=>"Ventura", :imageid=>"974442", :average=>"6.64303", :boardgame=>2699, :strategygames=>932, :number=>6, :poster=>"Avandrel", :itemid=>"3444097", :body=>"\n\t\n\t\n\t\t"}, {:id=>"7632", :title=>"The Near East", :imageid=>"188893", :itemid=>"3444099", :body=>"\n\t\n\t\n\t\t", :average=>"6.70333", :boardgame=>0, :wargames=>0, :number=>8, :poster=>"Avandrel"}]]}, {:poster=>"avandrel", :from=>[[{:id=>"32898", :title=>"Śląsk 1939", :imageid=>"323431", :average=>"6.5", :boardgame=>0, :wargames=>0, :number=>1, :poster=>"Avandrel", :itemid=>"3428776", :body=>"\n\tNIEAKTUALNE\n\t\n\t\t"}, {:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>2, :poster=>"Avandrel", :itemid=>"3428842", :body=>"\n\tnieaktualne\n\t\n\t\t"}, {:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>3, :poster=>"Avandrel", :itemid=>"3428861", :body=>"\n\t123\n\t\n\t\t"}]], :to=>[[{:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>2, :poster=>"Avandrel", :itemid=>"3428842", :body=>"\n\tnieaktualne\n\t\n\t\t"}, {:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>3, :poster=>"Avandrel", :itemid=>"3428861", :body=>"\n\t123\n\t\n\t\t"}, {:id=>"24417", :title=>"Factory Fun", :imageid=>"802170", :itemid=>"3444094", :body=>"\n\t\n\t\n\t\t", :average=>"6.94877", :boardgame=>471, :strategygames=>288, :number=>4, :poster=>"Avandrel"}, {:id=>"34871", :title=>"Ventura", :imageid=>"974442", :average=>"6.64303", :boardgame=>2699, :strategygames=>932, :number=>6, :poster=>"Avandrel", :itemid=>"3444097", :body=>"\n\t\n\t\n\t\t"}, {:id=>"12333", :title=>"Twilight Struggle", :imageid=>"361592", :average=>"8.32996", :boardgame=>1, :wargames=>1, :strategygames=>1, :number=>3, :poster=>"Avandrel", :itemid=>"3428861", :body=>"\n\t123\n\t\n\t\t"}, {:id=>"24417", :title=>"Factory Fun", :imageid=>"802170", :itemid=>"3444094", :body=>"\n\t\n\t\n\t\t", :average=>"6.94877", :boardgame=>471, :strategygames=>288, :number=>4, :poster=>"Avandrel"}, {:id=>"34871", :title=>"Ventura", :imageid=>"974442", :average=>"6.64303", :boardgame=>2699, :strategygames=>932, :number=>6, :poster=>"Avandrel", :itemid=>"3444097", :body=>"\n\t\n\t\n\t\t"}, {:id=>"7632", :title=>"The Near East", :imageid=>"188893", :itemid=>"3444099", :body=>"\n\t\n\t\n\t\t", :average=>"6.70333", :boardgame=>0, :wargames=>0, :number=>8, :poster=>"Avandrel"}]]}]], :id=>"178867"}'
		end
	end

end